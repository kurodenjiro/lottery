(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{12:function(e,t,n){e.exports=n(21)},17:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),s=n(5),r=n.n(s),u=(n(17),n(6)),c=n(1),l=n.n(c),o=n(2),p=n(7),m=n(8),y=n(10),d=n(9),b=n(11),w=n(3),h=n.n(w),f=function(){return new Promise((function(e,t){window.addEventListener("load",Object(o.a)(l.a.mark((function n(){var a,i,s,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!window.ethereum){n.next=13;break}return a=new h.a(window.ethereum),n.prev=2,n.next=5,window.ethereum.enable();case 5:e(a),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(2),t(n.t0);case 11:n.next=14;break;case 13:window.web3?(i=window.web3,console.log("Injected web3 detected."),e(i)):(s=new h.a.providers.HttpProvider("https://bsc-dataseed.binance.org/"),r=new h.a(s),console.log("No web3 instance injected, using Local web3."),e(r));case 14:case"end":return n.stop()}}),n,null,[[2,8]])}))))}))},v=(n(20),function(e){function t(e){var n;return Object(p.a)(this,t),(n=Object(y.a)(this,Object(d.a)(t).call(this,e))).componentDidMount=Object(o.a)(l.a.mark((function e(){var t,a,i,s,r,u,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,internalType:"address payable",name:"winner",type:"address"},{indexed:!1,internalType:"uint256",name:"prize",type:"uint256"}],name:"PickWinnerEvent",type:"event"},{inputs:[],name:"_minimumToken",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"_token",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfTicket",type:"uint256"}],name:"buyTicket",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"getBalance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getPlayers",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"getRound",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getWinners",outputs:[{internalType:"address[]",name:"",type:"address[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"manager",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"minPlayers",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"numberOfWinner",type:"uint256"}],name:"pickWinner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"players",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"winner",type:"address"},{internalType:"uint256",name:"prize",type:"uint256"}],name:"sendWinner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"price",type:"uint256"}],name:"setTicketPrice",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"token",type:"address"},{internalType:"uint256",name:"minimumToken",type:"uint256"}],name:"setTokenRequirement",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"ticketPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"winners",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{stateMutability:"payable",type:"receive"}],a="0xcf90e70429c87531fd1691e0ce627c503bd18fed",e.next=4,f();case 4:return i=e.sent,s=new i.eth.Contract(t,a),e.next=8,s.methods.manager().call();case 8:return r=e.sent,e.next=11,s.methods.getPlayers().call();case 11:return u=e.sent,e.next=14,i.eth.getBalance(s.options.address);case 14:c=e.sent,n.setState({manager:r,players:u,balance:c,web3:i,contract:s}),console.log(n.state.balance);case 17:case"end":return e.stop()}}),e)}))),n.onSubmit=function(){var e=Object(o.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,n.state.web3.eth.getAccounts();case 4:return a=e.sent,n.setState({message:"Waiting on transaction success ..."}),e.next=8,n.state.web3.eth.sendTransaction({from:a[0],to:n.state.contract.options.address,value:n.state.web3.utils.toWei(n.state.value,"ether")});case 8:n.setState({message:"You have beend entered"}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("web3.eth.handleRevert =",n.state.web3.eth.handleRevert),console.error(e.t0),console.log("err.message =",e.t0.message);case 16:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),n.onChange=function(e){n.setState(Object(u.a)({},e.target.name,e.target.value))},n.onClick=function(){var e=Object(o.a)(l.a.mark((function e(t){var a,i,s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n.setState({message:"Waiting on transaction success ..."}),e.next=4,n.state.web3.eth.getAccounts();case 4:return a=e.sent,e.next=7,n.state.contract.methods.pickWinner().send({from:a[0]});case 7:i=e.sent,s=i.events.PickWinnerEvent.returnValues,n.setState({winner:s.winner,prize:s.prize}),n.setState({message:"Waiting on transaction success ..."});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.state={web3:null,contract:null,manager:"",players:[],balance:"",value:"",message:"",winner:"",prize:""},n}return Object(b.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.web3?i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"row mt-5"},i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("div",{className:"App"},i.a.createElement("h1",null,"Lottery Contract"),i.a.createElement("p",null,"This contract is managed by:  ",this.state.manager),i.a.createElement("p",null,"There are currently ",this.state.players.length," people entered, compeiting to win ",this.state.web3.utils.fromWei(this.state.balance,"ether")," bnb"),i.a.createElement("hr",null),i.a.createElement("form",{onSubmit:this.onSubmit,noValidate:!0},i.a.createElement("h4",null,"Wanna try your luck?"),i.a.createElement("div",{className:"form-group"},i.a.createElement("label",null,"Amount of BNB to enter"),i.a.createElement("input",{name:"value",onChange:this.onChange,value:this.state.value,className:"form-control",placeholder:"Please enter exact amount(BNB): 0.1"})),i.a.createElement("button",{className:"btn btn-warning",type:"submit"},"Enter")),i.a.createElement("hr",null),i.a.createElement("p",null,this.state.message),i.a.createElement("hr",null),i.a.createElement("h4",null,"Ready to pick a winner?"),i.a.createElement("p",null,"Winner: ",this.state.winner),i.a.createElement("p",null,"Prize: ",this.state.web3.utils.fromWei(this.state.prize,"ether")," BNB"),i.a.createElement("button",{className:"btn btn-info",onClick:this.onClick},"Pick winner"))),i.a.createElement("div",{className:"col-sm-6"},i.a.createElement("div",{className:""},i.a.createElement("h2",null,"User stories"),i.a.createElement("ul",{className:"list-group text-success"},i.a.createElement("li",{className:"list-group-item"},"1. As a player, I want to pacticiate in the lotter with my BNB account"),i.a.createElement("li",{className:"list-group-item"},"2. As a manager, I want to set the fixed amount to pacticiate in the Lottery"),i.a.createElement("li",{className:"list-group-item"},"3. As a manager, I want to be able to pick the winner"),i.a.createElement("li",{className:"list-group-item"},"4. As a manager, I want to take 10% as fee"),i.a.createElement("li",{className:"list-group-item"},"5. As a player, I will take 90% as a prize of the lottery")))))):i.a.createElement("div",null,"Loading Web3, accounts, and contract...")}}]),t}(a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(i.a.createElement(v,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[12,1,2]]]);
//# sourceMappingURL=main.c723bf64.chunk.js.map